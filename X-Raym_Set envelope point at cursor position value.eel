// Template
// EEL Script for Reaper
// Author: X-Raym
// Author URl: http://extremraym.com
// Source: GitHub > X-Raym > EEL Scripts for Cockos REAPER
// Source URl: https://github.com/X-Raym/REAPER-EEL-Scripts
// Licence: GPL v3
// Release Date: 19-01-2015
// Forum Thread: EEL : Action name
// Forum Thread URl: http://forum.cockos.com/

// Version: 1.2
// Version Date: 29-01-2015
// Required: Reaper 5.0 pre 9, SWS 2.6.2 #0

// ----- DEBUGGING ====>
@import X-Raym_Functions - console debug messages.eel

debug = 1; // 0 => No console. 1 => Display console messages for debugging.
clean = 1; // 0 => No console cleaning before every script execution. 1 => Console cleaning before every script execution.

msg_clean();
// <==== DEBUGGING -----

function main()
(
	Undo_BeginBlock(); // Begining of the undo block. Leave it at the top of your main function.

	// YOUR CODE BELOW

	// GET SELECTED TRACK ?
	envelope = GetSelectedTrackEnvelope(NULL);

	// SELECT THE ENVELOPE
	extension_api("BR_EnvAlloc", envelope, 1);

	// GET CURSOR POSITION
	position = GetCursorPosition();

	// GET POINT
	id = extension_api("BR_EnvFind", envelope, position, delta);

	// VALUE
	value = 0;

	// SET POINT VALUE
	extension_api("BR_EnvSetPoint", envelope, id, position, value, shape, 1, bezier);

	// LIBERATE THE ENVELOPE AND COMIT CHANGE
	extension_api("BR_EnvFree", envelope, 0);
	
	// YOUR CODE ABOVE

	Undo_EndBlock("My action", 0); // End of the undo block. Leave it at the bottom of your main function.
);

msg_start(); // Display characters in the console to show you the begining of the script execution.

main(); // Execute your main function

UpdateArrange(); // Update the arrangement (often needed)

msg_end(); // Display characters in the console to show you the end of the script execution.
